#synchronized底层

1.CAS（compareAndSwap比较并交换）----无锁，自旋锁

一个对象的构成
	T{
		int m = 8;
	}

	markwork  8个字节
	class pointer
	m 四个字节
	padding(填充位置)
	
	要修改一个值的时候，读出来这个值，看看是否是这个值，如果在此过程中被修改了，就在循环一次，直到成功为止
	
2.锁升级的概念

	
	
	
	偏向锁（实际上没有上锁，只是把线程的id号记录一下），为什么会有偏向锁，因为大多数情况synchronized只有一个线程运行，例如StringBuffer
	
	当偏向锁有竞争的时候，升级为自旋锁！
	
	当自旋锁也没有获取到锁的时候，升级为重量级锁（重度竞争耗时等待时间过长）
	
	
	
